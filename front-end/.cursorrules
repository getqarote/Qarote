# Front-end Cursor Rules

## Import Ordering Convention

All imports in front-end files must follow this strict ordering:

1. **CSS and style files** - Stylesheet imports (e.g., `./index.css`, `@/styles/theme.css`, `.scss`, `.less`, `.sass`)
2. **Node.js built-in modules** - Node.js core modules (e.g., `node:path`, `node:fs`, `node:url`)
3. **React modules** - React and React-related packages (e.g., `react`, `react-dom`, `react-router-dom`, `@react-oauth/google`, `@tanstack/react-query`)
4. **External npm packages** - Other third-party packages (e.g., `zod`, `date-fns`, `lucide-react`, `@radix-ui/*`)
5. **Lib modules** - Internal library functionality (`@/lib/*`)
6. **Components modules** - React components (`@/components/*`)
7. **Contexts modules** - React contexts (`@/contexts/*`)
8. **Hooks modules** - Custom React hooks (`@/hooks/*`)
9. **Schemas modules** - Zod validation schemas (`@/schemas/*`)
10. **Types modules** - Type definitions (`@/types/*`)
11. **Config** - Configuration files (`@/config`)
12. **Relative imports** - Local file imports (`./`, `../`)

### Example

```typescript
// 1. CSS and style files
import "./index.css";
import "@/styles/theme.css";

// 2. Node.js built-in modules
import { readFileSync } from "node:fs";

// 3. React modules
import { useState, useEffect } from "react";
import { useNavigate } from "react-router-dom";
import { useQuery } from "@tanstack/react-query";

// 4. External npm packages
import { z } from "zod/v4";
import { format } from "date-fns";
import { Button } from "@radix-ui/react-button";

// 5. Lib modules
import { apiClient } from "@/lib/api";
import { logger } from "@/lib/logger";

// 6. Components modules
import { Card } from "@/components/ui/card";
import { Button } from "@/components/ui/button";

// 7. Contexts modules
import { useAuth } from "@/contexts/AuthContext";

// 8. Hooks modules
import { useUser } from "@/hooks/useUser";
import { useWorkspace } from "@/hooks/useWorkspace";

// 9. Schemas modules
import { signUpSchema } from "@/schemas/forms";

// 10. Types modules
import { UserPlan } from "@/types/plans";

// 11. Config
import { config } from "@/config";

// 12. Relative imports
import { helperFunction } from "./utils";
```

### Enforcement

This ordering is enforced by:

- ESLint with `eslint-plugin-simple-import-sort`
- Cursor rules (this file)

Run `npm run lint:fix` to automatically fix import ordering.

## Tailwind Configuration

- **ALWAYS reference `front-end/tailwind.config.ts` before creating or updating components**
  - Check available custom colors, animations, and design tokens defined in the config
  - Use the predefined color palette (primary, secondary, destructive, muted, accent, etc.)
  - Use custom background gradients (`gradient-page`, `gradient-button`, `gradient-title`) when appropriate
  - Reference custom animations and keyframes if needed
  - Ensure consistency with the existing design system

## Button Styling

- **Primary action buttons (CTAs) MUST use the gradient button classes:**
  - Use `bg-gradient-button hover:bg-gradient-button-hover text-white` for all primary action buttons
  - This applies to submit buttons, save buttons, create buttons, and any other primary CTAs
  - **DO NOT** use hardcoded colors like `bg-orange-500 hover:bg-orange-600`
  - Example:
    ```tsx
    <Button
      type="submit"
      className="bg-gradient-button hover:bg-gradient-button-hover text-white"
    >
      Save Settings
    </Button>
    ```

## Toggle Input Styling

- **Switch/Toggle components MUST use the gradient button classes when checked:**
  - Use `data-[state=checked]:bg-gradient-button` for all Switch components
  - This ensures toggle switches match the design system's gradient styling
  - **DO NOT** rely on default `bg-primary` styling for switches
  - Example:
    ```tsx
    <Switch
      checked={enabled}
      onCheckedChange={setEnabled}
      className="data-[state=checked]:bg-gradient-button"
    />
    ```

## React Query Hooks

- **All `useQuery` hooks MUST be located in `src/hooks/useApi.ts`**
  - Do not create inline `useQuery` calls in components or pages
  - Create custom hooks in `useApi.ts` for all data fetching operations
  - Export hooks from `useApi.ts` and import them in components

- **All `useMutation` hooks SHOULD be located in `src/hooks/useApi.ts`**
  - Prefer creating mutation hooks in `useApi.ts` for consistency
  - Exceptions: Simple, component-specific mutations that don't need reuse can remain in components
  - All server-related mutations (users, vhosts, queues, etc.) must be in `useApi.ts`

- **Query hooks should:**
  - Accept `serverId: string | null` when applicable
  - Include `serverExists: boolean = true` parameter to prevent queries for deleted servers
  - Handle query invalidation in `onSuccess` callbacks for mutations
  - Use consistent query keys defined in `queryKeys` object

- **Components should:**
  - Import hooks from `@/hooks/useApi`
  - Handle UI-specific concerns (toast notifications, navigation, state updates) in components
  - Pass `serverExists` validation to hooks when checking if server exists

## Example

```typescript
// ✅ CORRECT - In useApi.ts
export const useUsers = (
  serverId: string | null,
  serverExists: boolean = true
) => {
  // ... hook implementation
};

// ❌ WRONG - In component
const { data } = useQuery({
  queryKey: ["users", serverId],
  queryFn: () => apiClient.getUsers(serverId, workspace.id),
});
```
